---

## basic
nomad_version:        latest
nomad_install_method: 'service'
nomad_install:        true
nomad_configure:      true
nomad_role:           client
nomad_home_path:      /srv/nomad
nomad_config_path:    "{% if nomad_install_method not in ['service', 'binary'] %}{{ nomad_home_path }}/config{% else %}/etc/nomad.d{% endif %}"
nomad_tls_path:       "{{ nomad_config_path }}/certs"
nomad_user:           nomad
nomad_group:          nomad

## config
nomad_datacenter: dc1
nomad_domain:     nomad
nomad_name:       "{{ ansible_hostname }}"
#nomad_namespace:
nomad_data_dir:   /opt/nomad
nomad_ui:
_nomad_ui_defaults:
  enabled: false
nomad_bind_addr:  "{{ ansible_default_ipv4.address }}"
#nomad_tags:
#nomad_consul:
nomad_addresses:
_nomad_addresses_defaults:
#  http: "127.0.0.1"
nomad_advertise:
_nomad_advertise_defaults:
#  http: "{{ ansible_default_ipv4.address }}"
nomad_ports:
_nomad_ports_defaults:
  http: 4646
  rpc:  4647
  serf: 4648
nomad_tls_generate_cert: true
#nomad_tls_ca:
#nomad_tls_ca_key:
nomad_tls_enable: true
nomad_tls:
_nomad_tls_defaults:
  http:                   true
  rpc:                    true   
  verify_https_client:    true
  verify_server_hostname: true
  ca_file:                "{{ nomad_tls_path }}/nomad-agent-ca.pem"
  cert_file:              "{{ nomad_tls_path }}/global-{{ nomad_role }}-{{ nomad_domain }}.pem"    
  key_file:               "{{ nomad_tls_path }}/global-{{ nomad_role }}-{{ nomad_domain }}-key.pem"
nomad_acl:
  enabled: false
nomad_server:
_nomad_server_defaults:
  enabled:          true
  bootstrap_expect: 3

...