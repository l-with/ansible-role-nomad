---

nomad_version: 1.0.1
nomad_user: nomad
nomad_group: "{{ nomad_user }}"

nomad_config_dir: "/etc/nomad/nomad.d"
nomad_data_dir: "/var/nomad"
nomad_plugin_dir: "{{ nomad_data_dir }}/plugins"

nomad_systemd_restart_sec: 42

nomad_acl_token_ttl: "30s"
nomad_acl_policy_ttl: "30s"

nomad_node_name: "{{ inventory_hostname_short }}"
nomad_bind_address: "{{ ansible_default_ipv4.address }}"

nomad_consul_address: http://127.0.0.1:8500
nomad_consul_tls_dir: /etc/consul/ssl
nomad_consul_allow_unauthenticated: true

nomad_tls_enable: false
nomad_tls_src_files: "{{ role_path+'/files' }}"
nomad_tls_dir: "/etc/nomad/ssl"

nomad_consul_tls_enable: false

nomad_raw_exec_enable: false

nomad_servers: "\
  {% set _nomad_servers = [] %}\
  {% for host in groups['nomad_instances'] %}\
    {% set _nomad_node_role = hostvars[host]['nomad_node_role'] | default('client', true) %}\
    {% if ( _nomad_node_role == 'server' or _nomad_node_role == 'both') %}\
      {% if _nomad_servers.append(host) %}{% endif %}\
    {% endif %}\
  {% endfor %}\
  {{ _nomad_servers }}"
nomad_bootstrap_expect: "{{ nomad_servers | count }}"

nomad_cni_plugins_version: 0.9.0

...